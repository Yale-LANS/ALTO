PROJECT(xbt_tracker)

INCLUDE(${CMAKE_CURRENT_SOURCE_DIR}/build/CommonInclude.cmake)

FIND_PACKAGE(MySQL)
CheckLibFound(MYSQL)
INCLUDE_DIRECTORIES(${MYSQL_INCLUDE_DIR})
LINK_DIRECTORIES(${MYSQL_LIBRARY_DIR})
SET(LIBS ${LIBS} ${MYSQL_LIBRARIES})

FIND_PACKAGE(ZLIB)
CheckLibFound(ZLIB)
INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR})
LINK_DIRECTORIES(${ZLIB_LIBRARY_DIR})
SET(LIBS ${LIBS} ${ZLIB_LIBRARIES})

FIND_PACKAGE(Boost ${BOOST_MIN_VERSION}
	COMPONENTS
		thread
	)
CheckLibFound(Boost)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})
LINK_DIRECTORIES(${Boost_LIBRARY_DIRS})
SET(LIBS ${LIBS} ${Boost_LIBRARIES})

FIND_PACKAGE(p4p_common_cpp)
CheckLibFound(p4p_common_cpp)
INCLUDE_DIRECTORIES(${p4p_common_cpp_INCLUDE_DIR})
LINK_DIRECTORIES(${p4p_common_cpp_LIBRARY_DIR})
SET(LIBS ${LIBS} ${p4p_common_cpp_LIBRARY})

# Add subdirectory for building the tracker
ADD_SUBDIRECTORY(Tracker)

# Install the raw source code
#INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/
#	DESTINATION share/${PROJECT_NAME}
#	COMPONENT TrackerDevel
#	PATTERN ".svn" EXCLUDE
#	PATTERN "cmake_install.cmake" EXCLUDE
#	PATTERN "CMakeFiles" EXCLUDE
#	)

